@model ValidControl

@{
    var playGround = ViewBag.PlayGround as PlayGroundModel.PlayGround;
    var isPsychicMove = (bool)ViewData["isPsychicMove"];

}

@if (isPsychicMove)
{
    <h3>Ход экстрасенсов</h3>
}
else
{
    <h3>Результат</h3>
    @await Html.PartialAsync("UserResultPartial", playGround);
}

<div class="row">
    <div class="col-md-12">
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Имя экстрасенса</th>
                    <th>Предполагаемое значение</th>
                    <th>История значений</th>
                    <th>Количество удачных попыток</th>
                    <th>Уровень достоверности на текущий момент</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in playGround.Psychics)
                {
                    var arrayString = String.Join(", ", item.AnswerHistory);
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.Name)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.CurrentAnswer)
                        </td>
                        <td>
                            @arrayString
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.SuccessfulAttempts)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.ConfidenceLevel)
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<hr />

@if (isPsychicMove)
{ @await Html.PartialAsync("PsychicBtnPartial", Model); }
else
{
    @await Html.PartialAsync("ResultBtnPartial");
}


